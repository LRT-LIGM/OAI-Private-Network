# FlexRIC Metrics CSV File Overview

This document explains the CSV output files generated by the xApp `xapp_gtp_mac_rlc_pdcp_moni`. These files contain real-time metrics collected from the gNodeB via the FlexRIC platform using E2 interface subscriptions.

---

## 1. `mac_metrics.csv`

This file contains MAC-layer statistics per UE, reported periodically.

### Columns Explained:

| Column        | Description                                                         |
| ------------- | ------------------------------------------------------------------- |
| `tstamp`      | Timestamp (Epoch format, in microseconds) when the record was saved |
| `rnti`        | Radio Network Temporary Identifier — uniquely identifies a UE       |
| `dl_aggr_prb` | Number of downlink Physical Resource Blocks (PRBs) allocated        |
| `ul_aggr_prb` | Number of uplink PRBs allocated                                     |
| `phr`         | Power Headroom Report — indicates remaining UE transmit power       |
| `wb_cqi`      | Wideband Channel Quality Indicator (CQI)                            |
| `dl_mcs1`     | Downlink Modulation and Coding Scheme index (MCS) for BWP1          |
| `ul_mcs1`     | Uplink MCS index                                                    |
| `dl_bler`     | Downlink Block Error Rate (ratio of failed transport blocks)        |
| `ul_bler`     | Uplink Block Error Rate                                             |

### Example Entry:

```
tstamp=1752065467932649, rnti=43150, dl_aggr_prb=1857, ul_aggr_prb=31173, phr=48,
wb_cqi=0, dl_mcs1=10, ul_mcs1=4, dl_bler=0.004034, ul_bler=0.001651
```

This shows that UE 43150 at a specific time used 1857 DL and 31173 UL PRBs with good PHR and acceptable error rates.

---

## 2. `pdcp_metrics.csv`

This file reports packet statistics from the PDCP layer, which handles data transfer between RAN and core network.

### Columns Explained:

| Column        | Description                                                                 |
| ------------- | --------------------------------------------------------------------------- |
| `tstamp`      | Timestamp (Epoch microseconds)                                              |
| `rnti`        | UE Identifier                                                               |
| `txpdu_bytes` | Number of bytes transmitted as PDUs (Protocol Data Units)                   |
| `rxpdu_bytes` | Number of bytes received as PDUs                                            |
| `txsdu_bytes` | Number of bytes transmitted as SDUs (Service Data Units, from upper layers) |
| `rxsdu_bytes` | Number of bytes received as SDUs                                            |

### Example Entry:

```
tstamp=1752065467932345, rnti=2, txpdu_bytes=0, rxpdu_bytes=72045, txsdu_bytes=68979, rxsdu_bytes=0
```

This shows that UE 2 received a large amount of data over PDCP but did not transmit anything at that moment.

---

## Data Collection Interval

Each row in these CSVs represents one metric sample, typically collected every few milliseconds (depending on RIC configuration).

---

## Use Cases

* Track UE resource usage (PRBs, CQI, MCS, power)
* Detect transmission issues (high BLER, low CQI)
* Measure throughput at PDCP layer
* Correlate behavior across layers (e.g., low CQI & high BLER)

---

## Notes

* These metrics are extracted from FlexRIC's internal SQLite DB at `/tmp/xapp_db_<timestamp>`.
* Scripts or tools can be used to export them to CSV for further processing, visualization, or analysis.

---
